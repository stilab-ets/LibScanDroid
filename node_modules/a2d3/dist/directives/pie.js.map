{"version":3,"sources":["../../src/angularD3/directives/pie.ts"],"names":[],"mappings":"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","file":"pie.js","sourceRoot":"","sourcesContent":["import { Input, Optional, Directive, ElementRef } from '@angular/core';\nimport { D3ChartDirective, D3Element, D3MarginDirective } from './chart';\nimport * as d3 from 'd3';\n\nexport class D3PieBase extends D3Element {\n  innerRadius = 0;\n  labelRadius = 0.7;\n  radiusAttr: string;\n\n  get radius() {\n    if (this.radiusAttr === 'height') {\n      return (this.height - this.verticalPadding) / 2;\n    } else {\n      return (this.width - this.horizontalPadding) / 2;\n    }\n  }\n\n  createArc(radius: number) {\n    return d3.svg.arc<any>()\n      .outerRadius(radius)\n      .innerRadius(radius * this.innerRadius);\n  }\n\n  createLabelArc(radius, offset = 0) {\n    return d3.svg.arc<any>()\n      .outerRadius(radius * this.labelRadius + offset)\n      .innerRadius(radius * this.labelRadius + offset);\n  }\n\n  createArcTween(arc, initial = null) {\n    return function (d) {\n      if (this._current == null) {\n        this._current = initial != null ? initial : d;\n      }\n\n      const i = d3.interpolate(this._current, d);\n      this._current = d;\n\n      return (t) => arc(i(t));\n    };\n  }\n\n  redraw() {\n    if (this.radiusAttr === 'height') {\n      //noinspection JSSuspiciousNameCombination\n      this.chart.width = this.height;\n      this.chart.height = this.height;\n    } else {\n      //noinspection JSSuspiciousNameCombination\n      this.chart.height = this.width;\n      this.chart.width = this.width;\n    }\n  }\n}\n\n\nexport class D3PieDirective extends D3PieBase implements D3Element {\n   name: string;\n   transition = 'ease';\n   duration = 500;\n   value = 'value';\n   label = 'label';\n   innerRadius: number;\n   labelRadius: number;\n   labelOffset = 12;\n   textAnchor = 'middle';\n   color: string;\n   avoidCollisions: boolean;\n\n  dy = '0.35em';\n  pie = d3.layout.pie().sort(null).value(d => d[this.value]);\n\n  private _center;\n  private _colorScale;\n\n  constructor(chart: D3ChartDirective, el: ElementRef,  margin?: D3MarginDirective) {\n    super(chart, el, margin);\n    this._center = this.element.attr('class', 'pie');\n  }\n\n  \n  get colorScale(): any {\n    return this._colorScale;\n  }\n\n  set colorScale(value: any) {\n    if (d3.scale[value]) {\n      this._colorScale = d3.scale[value]();\n    }\n  }\n\n  redraw() {\n    const data = this.data;\n    super.redraw();\n    const radius = this.radius;\n    const arc = this.createArc(radius);\n    const arcTween = this.createArcTween(arc);\n\n    this._center.attr('transform', `translate(${radius}, ${radius})`);\n\n    const slices = this._center.selectAll('path.pie').data(this.pie(data));\n    slices.enter().append('path')\n      .attr('class', (d, i) => `pie pie-${i}`)\n      .attr('d', arc);\n\n    slices.style('fill', (d, i) => this.getColors(d, i))\n      .attr('class', (d, i) => `pie pie-${i}`);\n\n    slices.transition().ease(this.transition).duration(this.duration)\n      .attrTween('d', arcTween);\n\n    slices.exit().remove();\n\n    if (this.label) {\n      const label = this._center.selectAll('text').data(this.pie(data));\n\n      label.enter().append('text')\n        .attr('class', (d, i) => `pie-label pie-label-${i}`);\n\n      label.style('text-anchor', this.textAnchor)\n        .attr('class', (d, i) => `pie-label pie-label-${i}`)\n        .text((d, i) => d.data[this.label]);\n\n      label.transition().ease(this.transition).duration(this.duration)\n        .attr('transform', this.getLabelPosition(radius));\n\n      label.exit().remove();\n    }\n  }\n\n  private getLabelPosition(radius) {\n    const padding = +this.labelOffset;\n    const avoidCollisions = this.avoidCollisions;\n    const labelArc = this.createLabelArc(radius);\n    let prevbb;\n\n    return function (d) {\n      let position = labelArc.centroid(d);\n      if (avoidCollisions) {\n        const relativePosition = [position[0], position[1]];\n\n        if (this._position) {\n          relativePosition[0] -= this._position[0];\n          relativePosition[1] -= this._position[1];\n        }\n\n        const bb = this.getBoundingClientRect();\n        const thisbb = {\n          left: bb.left + (relativePosition[0] - padding),\n          top: bb.top + (relativePosition[1] - padding),\n          right: bb.right + relativePosition[0] + padding,\n          bottom: bb.bottom + relativePosition[1] + padding,\n        };\n\n        const hasCollision = !(thisbb.right < prevbb.left\n          || thisbb.left > prevbb.right\n          || thisbb.bottom < prevbb.top\n          || thisbb.top > prevbb.bottom);\n\n        if (prevbb && hasCollision) {\n          const ctx = thisbb.left + (thisbb.right - thisbb.left) / 2;\n          const cty = thisbb.top + (thisbb.bottom - thisbb.top) / 2;\n          const cpx = prevbb.left + (prevbb.right - prevbb.left) / 2;\n          const cpy = prevbb.top + (prevbb.bottom - prevbb.top) / 2;\n          const offset = Math.sqrt(Math.pow(ctx - cpx, 2) + Math.pow(cty - cpy, 2)) / 2;\n          const offsetArc = this.createLabelArc(radius, offset);\n          position = offsetArc.centroid(d);\n        }\n\n        this._position = position;\n        prevbb = thisbb;\n      }\n      return `translate(${position})`;\n    };\n  }\n\n  private getColors(d, i) {\n    if (this.colorScale) {\n      return this.colorScale(i);\n    }\n\n    if (this.color) {\n      return d[this.color];\n    }\n\n    if (d.color) {\n      return d.color;\n    }\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[d3-pie]'\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: D3ChartDirective, },\n{type: ElementRef, },\n{type: D3MarginDirective, decorators: [{ type: Optional }, ]},\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'name': [{ type: Input },],\n'transition': [{ type: Input },],\n'duration': [{ type: Input },],\n'value': [{ type: Input },],\n'label': [{ type: Input },],\n'innerRadius': [{ type: Input, args: ['inner-radius', ] },],\n'labelRadius': [{ type: Input, args: ['label-radius', ] },],\n'labelOffset': [{ type: Input, args: ['label-offset', ] },],\n'textAnchor': [{ type: Input, args: ['text-anchor', ] },],\n'color': [{ type: Input },],\n'avoidCollisions': [{ type: Input, args: ['avoid-collisions', ] },],\n'colorScale': [{ type: Input, args: ['color-scale', ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}